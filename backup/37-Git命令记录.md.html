<div class="markdown-heading"><h2 class="heading-element">查询Git提交用户记录</h2><a id="user-content-查询git提交用户记录" class="anchor" aria-label="Permalink: 查询Git提交用户记录" href="#查询git提交用户记录"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-shell"><pre>git log --format=<span class="pl-s"><span class="pl-pds">"</span>%an &lt;%ae&gt;<span class="pl-pds">"</span></span> --all <span class="pl-k">|</span> sort <span class="pl-k">|</span> uniq</pre></div>
<p>--all：包括所有分支的提交。</p>
<p>sort | uniq：对结果排序并去重。</p>
<p>输出示例：</p>
<pre><code>random &lt;r@n.dom&gt;
</code></pre>
<div class="markdown-heading"><h2 class="heading-element">修改历史提交用户信息</h2><a id="user-content-修改历史提交用户信息" class="anchor" aria-label="Permalink: 修改历史提交用户信息" href="#修改历史提交用户信息"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-shell"><pre>git filter-repo --name-callback <span class="pl-s"><span class="pl-pds">"</span>return b<span class="pl-cce">\"</span>random<span class="pl-cce">\"</span><span class="pl-pds">"</span></span> --email-callback <span class="pl-s"><span class="pl-pds">"</span>return b<span class="pl-cce">\"</span>r@n.dom<span class="pl-cce">\"</span><span class="pl-pds">"</span></span> --force

git push --force</pre></div>
<p>PS: 在 Windows 的 CMD 中，单引号可能不被识别，建议用双引号</p>
<div class="markdown-heading"><h2 class="heading-element">depth=1 拉取其他分支</h2><a id="user-content-depth1-拉取其他分支" class="anchor" aria-label="Permalink: depth=1 拉取其他分支" href="#depth1-拉取其他分支"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>当你使用 git clone --depth 1 克隆仓库时，Git 只会克隆最新的提交历史（浅克隆），并且默认只拉取默认分支（通常是 main 或 master）。如果你需要获取其他分支, 执行以下命令</p>
<div class="highlight highlight-source-shell"><pre>git config remote.origin.fetch <span class="pl-s"><span class="pl-pds">"</span>+refs/heads/*:refs/remotes/origin/*<span class="pl-pds">"</span></span>
git fetch --depth=1
git checkout branch-name</pre></div>
<p>将浅克隆转换为完整克隆</p>
<div class="highlight highlight-source-shell"><pre>git fetch --unshallow</pre></div>
<div class="markdown-heading"><h2 class="heading-element">比较分支并导出变更文件</h2><a id="user-content-比较分支并导出变更文件" class="anchor" aria-label="Permalink: 比较分支并导出变更文件" href="#比较分支并导出变更文件"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-shell"><pre>git diff 6db1256718a184ece757df2b7d8bf22444801661 8906e42d5aeff10b70086bd7aece0f3663edbddd --name-only <span class="pl-k">|</span> xargs zip update.zip

<span class="pl-c"><span class="pl-c">#</span> 比较文件并导出为zip压缩包, 根据本机情况可以选择zip或者7zip</span>
git diff feature/xxx-0719 origin/master --name-only <span class="pl-k">|</span> xargs zip user.zip

git diff feature/xxx-0719 origin/master --name-only <span class="pl-k">|</span> xargs 7z a -tzip user.zip</pre></div>
<div class="markdown-heading"><h2 class="heading-element">删除敏感文件历史提交记录</h2><a id="user-content-删除敏感文件历史提交记录" class="anchor" aria-label="Permalink: 删除敏感文件历史提交记录" href="#删除敏感文件历史提交记录"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>以<code>.vscode/settings.json</code>文件为例</p>
<div class="highlight highlight-source-shell"><pre>git filter-branch --force --index-filter  <span class="pl-s"><span class="pl-pds">"</span>git rm --cached --ignore-unmatch .vscode/settings.json<span class="pl-pds">"</span></span> --prune-empty --tag-name-filter cat -- --all

git add <span class="pl-c1">.</span>
git commit -am <span class="pl-s"><span class="pl-pds">"</span>commit<span class="pl-pds">"</span></span>
git push origin --force --all</pre></div>
<p><a href="https://anaer.github.io/blog/post/67.html" rel="nofollow">067 Git删除大文件</a></p>
