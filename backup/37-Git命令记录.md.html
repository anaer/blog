
  <article class="markdown-body">
    <h2 id="git">Git变量</h2>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code><span class="nb">set</span><span class="w"> </span><span class="nv">GIT_TRACE</span><span class="o">=</span><span class="m">1</span><span class="w">    </span><span class="c1"># 启用 GIT_TRACE 来调试  </span>
<span class="nb">set</span><span class="w"> </span><span class="nv">GIT_PAGER</span><span class="o">=</span>cat<span class="w">  </span><span class="c1"># 禁用分页器，直接查看输出  </span>
</code></pre></div></div>
<h2 id="git_1">Git命令中文乱码 测试有效</h2>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code><span class="c1"># 设置文件名编码为 UTF-8  </span>
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>core.quotepath<span class="w"> </span><span class="nb">false</span><span class="w">  </span>

<span class="c1"># 设置提交日志等输出编码为 UTF-8  </span>
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>i18n.commit.encoding<span class="w"> </span>utf-8<span class="w">  </span>
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>i18n.logoutputencoding<span class="w"> </span>utf-8<span class="w">  </span>
</code></pre></div></div>
<h2 id="git_2">使用 Git 配置强制识别大小写变化</h2>
<p>Git 默认在 大小写不敏感的系统（如 Windows/macOS 默认设置）中不会提交 仅大小写不同的文件名更改。  </p>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code><span class="c1"># 临时设置  </span>
git<span class="w"> </span>config<span class="w"> </span>core.ignorecase<span class="w"> </span><span class="nb">false</span><span class="w">  </span>
</code></pre></div></div>
<h2 id="git_3">查询Git提交用户记录</h2>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>git<span class="w"> </span>log<span class="w"> </span>--format<span class="o">=</span><span class="s2">&quot;%an &lt;%ae&gt;&quot;</span><span class="w"> </span>--all<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w">  </span>
</code></pre></div></div>
<p>--all：包括所有分支的提交。  </p>
<p>sort | uniq：对结果排序并去重。  </p>
<p>输出示例：<br />
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>random &lt;r@n.dom&gt;  
</code></pre></div></div></p>
<h2 id="_1">修改历史提交用户信息</h2>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>git<span class="w"> </span>filter-repo<span class="w"> </span>--name-callback<span class="w"> </span><span class="s2">&quot;return b\&quot;random\&quot;&quot;</span><span class="w"> </span>--email-callback<span class="w"> </span><span class="s2">&quot;return b\&quot;r@n.dom\&quot;&quot;</span><span class="w"> </span>--force<span class="w">  </span>

git<span class="w"> </span>push<span class="w"> </span>--force<span class="w">  </span>
</code></pre></div></div>
<p>PS: 在 Windows 的 CMD 中，单引号可能不被识别，建议用双引号  </p>
<h2 id="depth1">depth=1 拉取其他分支</h2>
<p>当你使用 git clone --depth 1 克隆仓库时，Git 只会克隆最新的提交历史（浅克隆），并且默认只拉取默认分支（通常是 main 或 master）。如果你需要获取其他分支, 执行以下命令  </p>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>git<span class="w"> </span>config<span class="w"> </span>remote.origin.fetch<span class="w"> </span><span class="s2">&quot;+refs/heads/*:refs/remotes/origin/*&quot;</span><span class="w">  </span>
git<span class="w"> </span>fetch<span class="w"> </span>--depth<span class="o">=</span><span class="m">1</span><span class="w">  </span>
git<span class="w"> </span>checkout<span class="w"> </span>branch-name<span class="w">  </span>
</code></pre></div></div>
<p>将浅克隆转换为完整克隆<br />
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>git<span class="w"> </span>fetch<span class="w"> </span>--unshallow<span class="w">  </span>
</code></pre></div></div></p>
<h2 id="_2">比较分支并导出变更文件</h2>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>git<span class="w"> </span>diff<span class="w"> </span>6db1256718a184ece757df2b7d8bf22444801661<span class="w"> </span>8906e42d5aeff10b70086bd7aece0f3663edbddd<span class="w"> </span>--name-only<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>zip<span class="w"> </span>update.zip<span class="w">  </span>

<span class="c1"># 比较文件并导出为zip压缩包, 根据本机情况可以选择zip或者7zip  </span>
git<span class="w"> </span>diff<span class="w"> </span>feature/xxx-0719<span class="w"> </span>origin/master<span class="w"> </span>--name-only<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>zip<span class="w"> </span>user.zip<span class="w">  </span>

git<span class="w"> </span>diff<span class="w"> </span>feature/xxx-0719<span class="w"> </span>origin/master<span class="w"> </span>--name-only<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>7z<span class="w"> </span>a<span class="w"> </span>-tzip<span class="w"> </span>user.zip<span class="w">  </span>
</code></pre></div></div>
<h2 id="_3">删除敏感文件历史提交记录</h2>
<p>以<code>.vscode/settings.json</code>文件为例  </p>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code>git<span class="w"> </span>filter-branch<span class="w"> </span>--force<span class="w"> </span>--index-filter<span class="w">  </span><span class="s2">&quot;git rm --cached --ignore-unmatch .vscode/settings.json&quot;</span><span class="w"> </span>--prune-empty<span class="w"> </span>--tag-name-filter<span class="w"> </span>cat<span class="w"> </span>--<span class="w"> </span>--all<span class="w">  </span>

git<span class="w"> </span>add<span class="w"> </span>.<span class="w">  </span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s2">&quot;commit&quot;</span><span class="w">  </span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>--force<span class="w"> </span>--all<span class="w">  </span>
</code></pre></div></div>
<p><a href="https://anaer.github.io/blog/post/67.html">0X43 Git删除大文件</a>    </p>
  </article>
  
<script>
document.addEventListener('DOMContentLoaded', () => {
  // 复制功能
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const code = btn.nextElementSibling.querySelector('code').innerText;
      navigator.clipboard.writeText(code).then(() => {
        btn.textContent = '已复制';
        setTimeout(() => btn.textContent = '复制', 1500);
      });
    });
  });

  // 折叠功能
  document.addEventListener('click', e => {
    if (e.target.classList.contains('fold-btn')) {
      const pre = e.target.parentElement.querySelector('pre');
      const collapsed = pre.style.display === 'none';
      pre.style.display = collapsed ? 'block' : 'none';
      e.target.textContent = collapsed ? '收起' : '展开';
    }
  });
});
</script>

