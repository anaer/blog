<div class="markdown-heading"><h2 class="heading-element">自定义变量</h2><a id="user-content-自定义变量" class="anchor" aria-label="Permalink: 自定义变量" href="#自定义变量"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">环境变量</h3><a id="user-content-环境变量" class="anchor" aria-label="Permalink: 环境变量" href="#环境变量"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>存储不同环境的变量, 在Visual Studio代码设置文件中直接定义.</p>
<div class="highlight highlight-source-json"><pre><span class="pl-ent">"rest-client.environmentVariables"</span>: {
    <span class="pl-ent">"$shared"</span>: {
        <span class="pl-ent">"version"</span>: <span class="pl-s"><span class="pl-pds">"</span>v1<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"prodToken"</span>: <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"nonProdToken"</span>: <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>
    },
    <span class="pl-ent">"local"</span>: {
        <span class="pl-ent">"version"</span>: <span class="pl-s"><span class="pl-pds">"</span>v2<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"host"</span>: <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"token"</span>: <span class="pl-s"><span class="pl-pds">"</span>{{$shared nonProdToken}}<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"secretKey"</span>: <span class="pl-s"><span class="pl-pds">"</span>devSecret<span class="pl-pds">"</span></span>
    },
    <span class="pl-ent">"production"</span>: {
        <span class="pl-ent">"host"</span>: <span class="pl-s"><span class="pl-pds">"</span>example.com<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"token"</span>: <span class="pl-s"><span class="pl-pds">"</span>{{$shared prodToken}}<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"secretKey"</span> : <span class="pl-s"><span class="pl-pds">"</span>prodSecret<span class="pl-pds">"</span></span>
    }
}</pre></div>
<div class="markdown-heading"><h3 class="heading-element">文件变量</h3><a id="user-content-文件变量" class="anchor" aria-label="Permalink: 文件变量" href="#文件变量"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>表示整个http文件的值, 在http文件中定义, 只有文件范围</p>
<p><code>@hostname = api.example.com</code></p>
<div class="markdown-heading"><h3 class="heading-element">请求变量</h3><a id="user-content-请求变量" class="anchor" aria-label="Permalink: 请求变量" href="#请求变量"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>在http文件中定义, 定义请求变量的响应值, 作为下个请求的参数, 比如先获取token, 再请求</p>
<div class="highlight highlight-source-httpspec"><pre><span class="pl-ii">@baseUrl = https://example.com/api</span>

<span class="pl-ii"># @name login</span>
<span class="pl-k">POST</span> {{<span class="pl-ii">baseUrl</span>}}<span class="pl-ii">/api/login HTTP/1.1</span>
<span class="pl-s"><span class="pl-v">Content-Type:</span> application/x-www-form-urlencoded</span>

<span class="pl-ii">name=foo&amp;password=bar</span>

<span class="pl-ii">###</span>

<span class="pl-ii">@authToken = {{login.response.headers.X-AuthToken}}</span>

<span class="pl-ii"># @name createComment</span>
<span class="pl-k">POST</span> {{<span class="pl-ii">baseUrl</span>}}<span class="pl-ii">/comments HTTP/1.1</span>
<span class="pl-s"><span class="pl-v">Authorization:</span> {{authToken}}</span>
<span class="pl-s"><span class="pl-v">Content-Type:</span> application/json</span>

{
    <span class="pl-ent">"content"</span>: <span class="pl-s"><span class="pl-pds">"</span>fake content<span class="pl-pds">"</span></span>
}

<span class="pl-ii">###</span>

<span class="pl-ii">@commentId = {{createComment.response.body.$.id}}</span>

<span class="pl-ii"># @name getCreatedComment</span>
<span class="pl-k">GET</span> {{<span class="pl-ii">baseUrl</span>}}<span class="pl-ii">/comments/{{commentId}} HTTP/1.1</span>
<span class="pl-s"><span class="pl-v">Authorization:</span> {{authToken}}</span>

<span class="pl-ii">###</span>

<span class="pl-ii"># @name getReplies</span>
<span class="pl-k">GET</span> {{<span class="pl-ii">baseUrl</span>}}<span class="pl-ii">/comments/{{commentId}}/replies HTTP/1.1</span>
<span class="pl-s"><span class="pl-v">Accept:</span> application/xml</span>

<span class="pl-ii">###</span>

<span class="pl-ii"># @name getFirstReply</span>
<span class="pl-k">GET</span> {{<span class="pl-ii">baseUrl</span>}}<span class="pl-ii">/comments/{{commentId}}/replies/{{getReplies.response.body.//reply[1]/@id}}</span></pre></div>
<div class="markdown-heading"><h3 class="heading-element">提示变量</h3><a id="user-content-提示变量" class="anchor" aria-label="Permalink: 提示变量" href="#提示变量"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>发送请求时 要求用户输入使用的变量</p>
<pre><code># @prompt text 请求时弹框提示输入文本
GET https://127.0.0.1/test

{
    "text": "{{text}}",
}
</code></pre>
<div class="markdown-heading"><h2 class="heading-element">内置变量</h2><a id="user-content-内置变量" class="anchor" aria-label="Permalink: 内置变量" href="#内置变量"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<pre><code>{{$guid}}
{{$randomInt min max}}
{{$timestamp [offset option]}}

{{$datetime}} 时间戳
{{$datetime -3 h}} 3小时前
{{$datetime 2 d}} 2天后

{{$datetime rfc1123|iso8601 [offset option]}}

{{$datetime rfc1123}}       Wed, 16 Apr 2025 06:23:49 GMT
{{$datetime iso8601}}       2025-04-16T06:24:53.379Z
{{$datetime 'YYYY-MM-DD'}}  2025-04-16

{{$localDatetime rfc1123|iso8601 [offset option]}}
使用本地时区
{{$localDatetime rfc1123}}       Wed, 16 Apr 2025 06:23:49 GMT
{{$localDatetime iso8601}}       2025-04-16T14:25:57+08:00
{{$localDatetime 'YYYY-MM-DD'}}  2025-04-16

{{$processEnv [%]envVarName}}
envVarName: 指定本地机器环境变量
%: 可选, 制定时, 将envVarName视为扩展设置环境变量, 并将其值用于查找.

{{$processEnv PATH}} PATH环境变量


{{$dotenv [%]variableName}}
返回.env文件中设置的环境变量, .env文件与.http文件在统一目录中

.env变量定义格式
VAR1=ABC

{{$aadToken [new] [public|cn|de|us|ppe] [&lt;domain|tenantId&gt;] [aud:&lt;domain|tenantId&gt;]}}

{{$oidcAccessToken  [new]  [&lt;clientId:&lt;clientId&gt;] [&lt;callbackPort:&lt;callbackPort&gt;] [authorizeEndpoint:&lt;authorizeEndpoint}] [tokenEndpoint:&lt;tokenEndpoint}] [scopes:&lt;scopes}] [audience:&lt;audience}]}
</code></pre>
<div class="markdown-heading"><h2 class="heading-element">取消代理</h2><a id="user-content-取消代理" class="anchor" aria-label="Permalink: 取消代理" href="#取消代理"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>因为VSCode配置了代理, 而用rest-client时 基本上不要代理, 又没有关代理的配置
虽然rest-client提供了excludeHostsForProxy配置, 但是经常性要加新域名, 已配置近30个了</p>
<p>可以修改以下文件:
c:\Users\Administrator.vscode\extensions\humao.rest-client-0.25.1\dist\extension.js</p>
<p>修改获取代理配置, 改名, 让找不到代理配置即可
workspace.getConfiguration("http") -&gt; workspace.getConfiguration("http1")</p>
<p>不过环境变量如果配置了http.proxy, 应该还能用, 未测试.</p>
<div class="markdown-heading"><h2 class="heading-element">相关链接</h2><a id="user-content-相关链接" class="anchor" aria-label="Permalink: 相关链接" href="#相关链接"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><a href="https://github.com/Huachao/vscode-restclient">vscode-restclient</a></p>
