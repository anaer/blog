
  <article class="markdown-body">
    <h2 id="ip2region"><a href="https://github.com/lionsoul2014/ip2region">ip2region</a></h2>
<h2 id="ip2region-xdb-58m"><a href="https://github.com/alading89/ip2region-xdb/releases">ip2region-xdb</a>  58M</h2>
<p>数据来自IP-API  </p>
<h2 id="geolite2-database-3"><a href="https://github.com/mojolabs-id/GeoLite2-Database/releases/">GeoLite2-Database</a> 每3天更新</h2>
<p>MaxMind's GeoLite2 Country, City, and ASN databases in csv and mmdb.  </p>
<p><a href="https://github.com/Dreamacro/maxmind-geoip/releases">maxmind-geoip</a> 每月12号更新  </p>
<p><a href="https://github.com/Skiddle-ID/geoip2-mirror/releases">geoip2-mirror</a>  每周二,五更新  </p>
<p><a href="https://github.com/P3TERX/GeoLite.mmdb/releases">GeoLite.mmdb</a> 每天  </p>
<div class="highlight"><div><button class="fold-btn">收起</button><button class="copy-btn">复制</button>
<pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">geoip2.database</span>  

<span class="k">def</span><span class="w"> </span><span class="nf">get_ip_info</span><span class="p">(</span><span class="n">ip_address</span><span class="p">,</span> <span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;GeoLite2-Country.mmdb&quot;</span><span class="p">):</span>  
    <span class="k">try</span><span class="p">:</span>  
        <span class="k">with</span> <span class="n">geoip2</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>  
            <span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>  
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;zh-CN&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GeoIP lookup failed for </span><span class="si">{</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>  

<span class="c1"># 使用示例  </span>
<span class="n">ip_address</span> <span class="o">=</span> <span class="s2">&quot;8.8.8.8&quot;</span>  
<span class="n">country</span> <span class="o">=</span> <span class="n">get_ip_info</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Country: </span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
</code></pre></div></div>
  </article>
  
<script>
document.addEventListener('DOMContentLoaded', () => {
  // 复制功能
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const code = btn.nextElementSibling.querySelector('code').innerText;
      navigator.clipboard.writeText(code).then(() => {
        btn.textContent = '已复制';
        setTimeout(() => btn.textContent = '复制', 1500);
      });
    });
  });

  // 折叠功能
  document.addEventListener('click', e => {
    if (e.target.classList.contains('fold-btn')) {
      const pre = e.target.parentElement.querySelector('pre');
      const collapsed = pre.style.display === 'none';
      pre.style.display = collapsed ? 'block' : 'none';
      e.target.textContent = collapsed ? '收起' : '展开';
    }
  });
});
</script>

