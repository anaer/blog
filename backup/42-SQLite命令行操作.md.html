
  <article class="markdown-body">
    <p>Ubuntu 20.04  </p>
<h2 id="_1">安装</h2>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>apt<span class="w"> </span>install<span class="w"> </span>sqlite3<span class="w">  </span>
</code></pre></div></div>
<h2 id="_2">连接数据库</h2>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>sqlite3<span class="w"> </span>your_db_file<span class="w">  </span>
</code></pre></div></div>
<h2 id="_3">显示所有表</h2>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>sqlite&gt;<span class="w"> </span>.tables<span class="w">  </span><span class="c1"># 显示所有表  </span>
sqlite&gt;<span class="w"> </span>.schema<span class="w"> </span>table_name<span class="w">  </span><span class="c1"># 显示指定表的结构  </span>
sqlite&gt;<span class="w"> </span>.schema<span class="w">  </span><span class="c1"># 显示所有表的结构  </span>
sqlite&gt;<span class="w"> </span>.fullschema<span class="w">  </span><span class="c1"># 显示所有表的完整结构 包含触发器等  </span>
</code></pre></div></div>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>sqlite&gt;<span class="w"> </span>.mode<span class="w"> </span>column<span class="w"> </span><span class="c1"># 以列模式显示  </span>
sqlite&gt;<span class="w"> </span>.headers<span class="w"> </span>on<span class="w"> </span><span class="c1"># 显示列名  </span>
</code></pre></div></div>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>sqlite&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>t_ad<span class="w"> </span>limit<span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w">  </span>
id<span class="w">  </span><span class="nb">type</span><span class="w">  </span>name<span class="w">            </span>sort<span class="w">  </span>status<span class="w">  </span>remark<span class="w">  </span>created_at<span class="w">                  </span>updated_at<span class="w">  </span>
--<span class="w">  </span>----<span class="w">  </span>--------------<span class="w">  </span>----<span class="w">  </span>------<span class="w">  </span>------<span class="w">  </span>--------------------------<span class="w">  </span>----------<span class="w">  </span>
<span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">     </span>abcd.011q2l.cn<span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w">               </span><span class="m">2021</span>-11-18<span class="w"> </span><span class="m">13</span>:24:32.152277<span class="w">  </span>
</code></pre></div></div>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>sqlite&gt;<span class="w"> </span>.mode<span class="w"> </span>list<span class="w"> </span><span class="c1"># 以列表模式显示  </span>
sqlite&gt;<span class="w"> </span>.headers<span class="w"> </span>off<span class="w"> </span><span class="c1"># 不显示列名  </span>
</code></pre></div></div>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code>sqlite&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>t_ad<span class="w"> </span>limit<span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w">  </span>
<span class="m">1</span><span class="p">|</span><span class="m">0</span><span class="p">|</span>abcd.011q2l.cn<span class="p">|</span><span class="m">0</span><span class="p">|</span><span class="m">0</span><span class="o">||</span><span class="m">2021</span>-11-18<span class="w"> </span><span class="m">13</span>:24:32.152277<span class="p">|</span><span class="w">  </span>
</code></pre></div></div>
<h2 id="_4">冲突时更新</h2>
<div class="highlight"><div><div style="text-align:right; margin-bottom:2px;"><button class="fold-btn">▲</button><button class="copy-btn"><svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg></button></div>
<pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">table_name</span><span class="p">(</span><span class="n">column1</span><span class="p">,</span><span class="w"> </span><span class="n">column2</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span><span class="w"> </span><span class="n">value2</span><span class="p">)</span><span class="w">  </span>
<span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="p">(</span><span class="n">column1</span><span class="p">)</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">SET</span><span class="w">  </span>
<span class="w">  </span><span class="n">column2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">excluded</span><span class="p">.</span><span class="n">column2</span><span class="p">;</span><span class="w">  </span>
</code></pre></div></div>
<p>column1 需要有唯一约束  </p>
  </article>
  
<style>
.fold-btn, .copy-btn {
  border: none;
  background: transparent;
  cursor: pointer;
  padding: 2px 6px;
  margin-right: 4px;
  font-size: 16px;
  outline: none;
  box-shadow: none;
  transition: background 0.2s;
}
.fold-btn:hover, .copy-btn:hover {
  background: #eee;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // 复制功能
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const code = btn.parentElement.nextElementSibling.querySelector('code').innerText;
      navigator.clipboard.writeText(code).then(() => {
        // 切换为已复制图标
        btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><path fill="green" d="M7.629 15.314l-4.243-4.243 1.414-1.414 2.829 2.828 6.364-6.364 1.414 1.414z"/></svg>';
        setTimeout(() => {
          // 恢复为复制图标
          btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 20 20" style="vertical-align:middle"><rect x="6" y="2" width="9" height="13" rx="2" fill="#555"/><rect x="3" y="5" width="9" height="13" rx="2" fill="#aaa"/></svg>';
        }, 1500);
      });
    });
  });

  // 折叠功能
  document.addEventListener('click', e => {
    if (e.target.classList.contains('fold-btn')) {
      const pre = e.target.parentElement.parentElement.querySelector('pre');
      const collapsed = pre.style.display === 'none';
      pre.style.display = collapsed ? 'block' : 'none';
      e.target.textContent = collapsed ? '▲' : '▼';
    }
  });
});
</script>

