<div class="markdown-heading"><h2 class="heading-element">CIDR 表示法</h2><a id="user-content-cidr-表示法" class="anchor" aria-label="Permalink: CIDR 表示法" href="#cidr-表示法"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>CIDR（Classless Inter-Domain Routing，无类域间路由）是一种简化的 IP 地址分配和路由选择协议，它使用了一种叫做 CIDR 表示法的方法来表示 IP 地址范围。</p>
<p>CIDR 表示法使用 IP 地址和前缀长度的组合来表示一个 IP 地址段，其中前缀长度指的是 IP 地址中网络部分的长度。</p>
<p>如，192.168.0.0/30 表示了一个包含 4 个 IP 地址的地址段，其中前 30 位是网络地址，后 2 位是主机地址。</p>
<table>
<thead>
<tr>
<th>配置</th>
<th>ip 地址段</th>
</tr>
</thead>
<tbody>
<tr>
<td>192.168.0.0/30</td>
<td>192.168.0.0-192.168.0.3</td>
</tr>
<tr>
<td>192.168.0.0/24</td>
<td>192.168.0.0-192.168.0.255</td>
</tr>
<tr>
<td>192.168.0.0/16</td>
<td>192.168.0.0-192.168.255.255</td>
</tr>
<tr>
<td>192.168.0.0/8</td>
<td>192.168.0.0-253.255.255.255</td>
</tr>
<tr>
<td>172.16.0.0/12</td>
<td>172.16.0.0-172.31.255.255</td>
</tr>
<tr>
<td>10.0.0.0/8</td>
<td>10.0.0.0-10.255.255.255</td>
</tr>
<tr>
<td>188.180.0.0/22</td>
<td>188.180.0.0-188.180.3.255</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">转换脚本</h2><a id="user-content-转换脚本" class="anchor" aria-label="Permalink: 转换脚本" href="#转换脚本"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># python 3.12.7</span>
<span class="pl-k">import</span> <span class="pl-s1">ipaddress</span>

<span class="pl-k">def</span> <span class="pl-en">cidr_to_ip_range</span>(<span class="pl-s1">cidr</span>):
    <span class="pl-k">try</span>:
        <span class="pl-s1">network</span> <span class="pl-c1">=</span> <span class="pl-s1">ipaddress</span>.<span class="pl-c1">ip_network</span>(<span class="pl-s1">cidr</span>, <span class="pl-s1">strict</span><span class="pl-c1">=</span><span class="pl-c1">False</span>)
        <span class="pl-k">return</span> {
            <span class="pl-s">"network"</span>: <span class="pl-en">str</span>(<span class="pl-s1">network</span>.<span class="pl-c1">network_address</span>),
            <span class="pl-s">"broadcast"</span>: <span class="pl-en">str</span>(<span class="pl-s1">network</span>.<span class="pl-c1">broadcast_address</span>),
            <span class="pl-s">"netmask"</span>: <span class="pl-en">str</span>(<span class="pl-s1">network</span>.<span class="pl-c1">netmask</span>),
            <span class="pl-s">"cidr"</span>: <span class="pl-s1">network</span>.<span class="pl-c1">prefixlen</span>,
            <span class="pl-s">"total_ips"</span>: <span class="pl-s1">network</span>.<span class="pl-c1">num_addresses</span>,
            <span class="pl-s">"start_ip"</span>: <span class="pl-en">str</span>(<span class="pl-s1">network</span>.<span class="pl-c1">network_address</span>),
            <span class="pl-s">"end_ip"</span>: <span class="pl-en">str</span>(<span class="pl-s1">network</span>.<span class="pl-c1">broadcast_address</span>)
        }
    <span class="pl-k">except</span> <span class="pl-v">ValueError</span> <span class="pl-k">as</span> <span class="pl-s1">e</span>:
        <span class="pl-k">return</span> <span class="pl-s">f"错误：<span class="pl-s1"><span class="pl-kos">{</span><span class="pl-en">str</span>(<span class="pl-s1">e</span>)<span class="pl-kos">}</span></span>"</span>

<span class="pl-k">if</span> <span class="pl-s1">__name__</span> <span class="pl-c1">==</span> <span class="pl-s">"__main__"</span>:
    <span class="pl-s1">cidr_input</span> <span class="pl-c1">=</span> <span class="pl-en">input</span>(<span class="pl-s">"请输入CIDR格式（例如 192.168.1.0/24 或 2001:db8::/32）: "</span>)
    <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">cidr_to_ip_range</span>(<span class="pl-s1">cidr_input</span>)

    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">result</span>, <span class="pl-s1">dict</span>):
        <span class="pl-en">print</span>(<span class="pl-s">"<span class="pl-cce">\n</span>CIDR解析结果："</span>)
        <span class="pl-en">print</span>(<span class="pl-s">f"网络地址: <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">result</span>[<span class="pl-s">'network'</span>]<span class="pl-kos">}</span></span>"</span>)
        <span class="pl-en">print</span>(<span class="pl-s">f"广播地址: <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">result</span>[<span class="pl-s">'broadcast'</span>]<span class="pl-kos">}</span></span>"</span>)
        <span class="pl-en">print</span>(<span class="pl-s">f"子网掩码: <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">result</span>[<span class="pl-s">'netmask'</span>]<span class="pl-kos">}</span></span>"</span>)
        <span class="pl-en">print</span>(<span class="pl-s">f"IP总数: <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">result</span>[<span class="pl-s">'total_ips'</span>]:,<span class="pl-kos">}</span></span>"</span>)
        <span class="pl-en">print</span>(<span class="pl-s">f"IP范围: <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">result</span>[<span class="pl-s">'start_ip'</span>]<span class="pl-kos">}</span></span>-<span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">result</span>[<span class="pl-s">'end_ip'</span>]<span class="pl-kos">}</span></span>"</span>)
    <span class="pl-k">else</span>:
        <span class="pl-en">print</span>(<span class="pl-s1">result</span>)</pre></div>
<div class="markdown-heading"><h2 class="heading-element">相关链接</h2><a id="user-content-相关链接" class="anchor" aria-label="Permalink: 相关链接" href="#相关链接"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><a href="https://zh.wikipedia.org/wiki/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1" rel="nofollow">CIDR 维基</a></p>
