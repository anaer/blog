<div class="markdown-heading"><h2 class="heading-element">循环执行脚本</h2><a id="user-content-循环执行脚本" class="anchor" aria-label="Permalink: 循环执行脚本" href="#循环执行脚本"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>判断参数命令执行结果, 如果失败则重复执行
<code>retry.cmd git push origin main</code></p>
<div class="highlight highlight-source-shell"><pre>@echo off
chcp 65001
<span class="pl-c1">echo</span> %<span class="pl-k">*</span>
<span class="pl-k">for</span> <span class="pl-smi">/l %%a</span> <span class="pl-k">in</span> (1,1,100) <span class="pl-k">do</span> (echo %%a------------------- <span class="pl-k">&amp;&amp;</span> %<span class="pl-k">*</span> <span class="pl-k">&amp;&amp;</span> goto :EOF<span class="pl-k">;</span> sleep 5)

:EOF
<span class="pl-c1">echo</span> -------------------end</pre></div>
<div class="markdown-heading"><h2 class="heading-element">git推拉脚本</h2><a id="user-content-git推拉脚本" class="anchor" aria-label="Permalink: git推拉脚本" href="#git推拉脚本"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>因github容易连不上, 所以pull, push时, 有时需要循环执行
暂定间隔5秒循环执行, 一般10次以内能成功 这里设置了100次, 如果需要永久循环 设置为(0,0,1)</p>
<p>用法: 将pull.cmd, push.cmd脚本放到PATH目录下, 使用时直接在仓库目录, 执行pull, push即可</p>
<div class="markdown-heading"><h3 class="heading-element">pull.cmd</h3><a id="user-content-pullcmd" class="anchor" aria-label="Permalink: pull.cmd" href="#pullcmd"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-shell"><pre>@echo off
chcp 65001
rem 因github容易连不上, 所以间隔5秒循环执行, 一般10次以内都能成功 这里设置了100次, 如果需要永久循环 设置为(0,0,1)
<span class="pl-c1">echo</span> git pull
git rev-parse --is-inside-work-tree <span class="pl-k">&gt;</span>nul <span class="pl-k">2&gt;</span>nul
<span class="pl-k">if</span> %errorlevel% equ 0 (
    <span class="pl-k">for</span> <span class="pl-smi">/l %%a</span> <span class="pl-k">in</span> (1,1,100) <span class="pl-k">do</span> (echo %%a----------------------- <span class="pl-k">&amp;&amp;</span> git pull <span class="pl-k">&amp;&amp;</span> goto :EOF<span class="pl-k">;</span> sleep 5)
) <span class="pl-k">else</span> (
    <span class="pl-c1">echo</span> 当前目录不是git仓库
)
:EOF
<span class="pl-c1">echo</span> -------------------------end</pre></div>
<div class="markdown-heading"><h3 class="heading-element">push.cmd</h3><a id="user-content-pushcmd" class="anchor" aria-label="Permalink: push.cmd" href="#pushcmd"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-shell"><pre>@echo off
chcp 65001
rem 因github容易连不上, 所以间隔5秒循环执行, 一般10次以内都能成功 这里设置了100次, 如果需要永久循环 设置为(0,0,1)
<span class="pl-c1">echo</span> git push
git rev-parse --is-inside-work-tree <span class="pl-k">&gt;</span>nul <span class="pl-k">2&gt;</span>nul
<span class="pl-k">if</span> %errorlevel% equ 0 (
    <span class="pl-k">for</span> <span class="pl-smi">/l %%a</span> <span class="pl-k">in</span> (1,1,100) <span class="pl-k">do</span> (echo %%a------------------- <span class="pl-k">&amp;&amp;</span> git push <span class="pl-k">&amp;&amp;</span> goto :EOF<span class="pl-k">;</span> sleep 5)
) <span class="pl-k">else</span> (
    <span class="pl-c1">echo</span> 当前目录不是git仓库
)

:EOF
<span class="pl-c1">echo</span> -------------------end</pre></div>
